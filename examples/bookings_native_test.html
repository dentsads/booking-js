<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Booking Demo</title>

  <style>
    body { background-color: #eee; min-width: 100vw; min-height: 100vh; }
    x-div { display: block; }
    .container { padding: 1px; margin: auto; max-width: 80%; }
    .title { font-family: "Ubuntu", "Helvetica Neue", Helvetica,Arial,sans-serif; text-align: center; color: #1a6ba9 }
  </style>
</head>
<body>

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="../dist/booking.js"></script>

  <h1 class="title">booking-js</h1>
  <div class="container">
    <div class="booking-target"></div>
  </div>


  <script>
    var widget = new TimekitBooking();

    widget.init({
      project_id: undefined,
      project_slug: undefined,
      debug: false,
      disable_remote_load: false,
      resources: [
        'cca33050-2adf-4bf5-86e3-e989d6974b41'       
      ],      
      el: document.querySelector('.booking-target'),
      fullcalendar: {
        locale: 'de'
      },
      availability: {
        mode: 'roundrobin_random',
        length: '10 minutes',
        from: '-1 hour',
        to: '1 weeks',
        buffer: '15 minutes',
        ignore_all_day_events: false
      },
      fullcalendar: {
        views: {
          agenda: {
            displayEventEnd: false
          },
          listing: {
            type: 'list',
            duration: { days: 365 / 2 },
            listDayAltFormat: 'dddd',
            noEventsMessage: 'No timeslots available'
          }
        },
        allDaySlot: false,
        scrollTime: '08:00:00',
        nowIndicator: true
      },
      ui: {
        display_name: 'Martys Timetravel Service',
        avatar: 'http://via.placeholder.com/100x100',
        availability_view: 'agendaWeek',
        timezone: 'Europe/Berlin',
        show_credits: false,
        show_timezone_helper: false,
        time_date_format: '24h-dmy-mon',
        localization: {
          allocated_resource_prefix: 'for',
          submit_button: 'Book it now!',
          success_message: 'Thanks for booking!'
        }
      },
      customer_fields: {
        name: {
          title: 'Your name please'
        },
        email: {
          prefilled: 'doc.brown@timekit.io'
        },
        comment: {
          title: 'Comment',
          prefilled: 'This is a comment'
        },
        department: {
          title: 'Department',
          type: 'string',
          format: 'select',
          enum: [
            'Development',
            'Design',
            'Sales'
          ]
        },
        terms: {
          title: 'I accept terms & conditions',
          format: 'checkbox'
        }
      },
      createBooking: function(args) {
        return Promise.resolve('BOOKING SUCCESS')
      },
      fetchAvailability: function() {
        return Promise.resolve({
          "data" : [{
              "start": "2020-04-09T18:00:00.000+02:00",
              "end": "2020-04-09T19:00:00.000+02:00",
              "resources": [ {"id": "cca33050-2adf-4bf5-86e3-e989d6974b41"} ]
            }, {
              "start": "2020-04-10T19:00:00.000+02:00",
              "end": "2020-04-10T20:00:00.000+02:00",
              "resources": [ {"id": "cca33050-2adf-4bf5-86e3-e989d6974b41"} ]
            }, {
              "start": "2020-04-10T20:00:00.000+02:00",
              "end": "2020-04-10T21:00:00.000+02:00",
              "resources": [ {"id": "cca33050-2adf-4bf5-86e3-e989d6974b41"} ]
            }, {
              "start": "2020-04-10T21:00:00.000+02:00",
              "end": "2020-04-10T22:00:00.000+02:00",
              "resources": [ {"id": "cca33050-2adf-4bf5-86e3-e989d6974b41"} ]
            }]
        })
      },
      callbacks: {
        fetchAvailabilityStarted:     function(args)      { console.log('fetchAvailabilityStarted', args); },
        fetchAvailabilitySuccessful:  function(response)  { console.log('fetchAvailabilitySuccessful', response); },
        fetchAvailabilityFailed:      function(response)  { console.log('fetchAvailabilityFailed', response); },
        createBookingStarted:         function(args)      { console.log('createBookingStarted', args); },
        createBookingSuccessful:      function(response)  { console.log('createBookingSuccessful', response); },
        createBookingFailed:          function(response)  { console.log('createBookingFailed', response); },
        fullCalendarInitialized:      function()          { console.log('fullCalendarInitialized'); },
        renderCompleted:              function()          { console.log('renderCompleted'); },
        showBookingPage:              function(slot)      { console.log('showBookingPage', slot); },
        closeBookingPage:             function()          { console.log('closeBookingPage'); },
        submitBookingForm:            function(values)    { console.log('submitBookingForm', values); }
      }
    });

  </script>

</body>
</html>
